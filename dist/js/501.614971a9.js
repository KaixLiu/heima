"use strict";(self["webpackChunkmusic_app"]=self["webpackChunkmusic_app"]||[]).push([[501],{7595:function(t,s,i){i.r(s),i.d(s,{default:function(){return c}});var e=function(){var t=this,s=t._self._c;return s("div",[s("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{input:t.inputFn},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),0===t.resultList.length?s("div",{staticClass:"search_wrap"},[s("p",{staticClass:"hot_title"},[t._v("热门搜索")]),s("div",{staticClass:"hot_name_wrap"},t._l(t.hotArr,(function(i,e){return s("span",{key:e,staticClass:"hot_item",on:{click:function(s){return t.fn(i.first)}}},[t._v(t._s(i.first))])})),0)]):s("div",{staticClass:"search_wrap"},[s("p",{staticClass:"hot_title"},[t._v("最佳匹配")]),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.resultList,(function(t){return s("SongItem",{key:t.id,attrs:{name:t.name,author:t.ar[0].name,id:t.id}})})),1)],1)],1)},a=[],n=i(6243),l=i(5079),o={name:"MySearch",data(){return{value:"",hotArr:[],resultList:[],loading:!1,finished:!1,page:1,timer:null}},async created(){const t=await(0,n["if"])();console.log(t),this.hotArr=t.data.result.hots},methods:{async getListFn(){return await(0,n.tT)({keywords:this.value,limit:20,offset:20*(this.page-1)})},async fn(t){this.page=1,this.finished=!1,this.value=t;const s=await this.getListFn();console.log(s),this.resultList=s.data.result.songs,this.loading=!1},async inputFn(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(this.page=1,this.finished=!1,0===this.value.length)return void(this.resultList=[]);const t=await this.getListFn();console.log(t),void 0!==t.data.result.songs?(this.resultList=t.data.result.songs,this.loading=!1):this.resultList=[]}),900)},async onLoad(){this.page++;const t=await this.getListFn();if(void 0===t.data.result.songs)return this.finished=!0,void(this.loading=!1);this.resultList=[...this.resultList,...t.data.result.songs],this.loading=!1}},components:{SongItem:l.Z}},r=o,u=i(3736),h=(0,u.Z)(r,e,a,!1,null,"de909e22",null),c=h.exports}}]);
//# sourceMappingURL=501.614971a9.js.map